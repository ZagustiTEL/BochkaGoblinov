{% extends "base.html" %}
{% block title %}Поиск пользователей{% endblock %}

{% block content %}
<div class="search-container">
    <h2>Поиск пользователей</h2>
    
    <form method="GET" action="{{ url_for('search_users') }}" class="search-form">
        <input type="text" name="q" value="{{ query }}" placeholder="Введите ник (@username) или логин" required>
        <button type="submit">Поиск</button>
    </form>
    
    {% if query %}
        {% if users %}
            <div class="search-results">
                <h3>Результаты поиска:</h3>
                <ul class="users-list">
                    {% for user in users %}
                        <li class="user-item">
                            <div class="user-info">
                                <strong>{{ user.unique_nickname }}</strong>
                                <span>({{ user.username }})</span>
                            </div>
                            <form method="POST" action="{{ url_for('add_friend') }}" style="display: inline;">
                                <input type="hidden" name="nickname" value="{{ user.unique_nickname }}">
                                <button type="submit" class="btn-small">Добавить в друзья</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% else %}
            <p class="no-results">Пользователи не найдены</p>
        {% endif %}
    {% endif %}
    
    <div class="back-link">
        <a href="{{ url_for('profile') }}">← Вернуться в профиль</a>
    </div>
</div>
{% endblock %}